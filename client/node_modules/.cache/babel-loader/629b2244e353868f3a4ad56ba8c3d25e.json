{"ast":null,"code":"import _classCallCheck from\"/Users/kelvinho/Documents/Coding/CAS website/website/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/kelvinho/Documents/Coding/CAS website/website/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/kelvinho/Documents/Coding/CAS website/website/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/kelvinho/Documents/Coding/CAS website/website/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{PureComponent}from'react';import'./App.css';import API from'./utils/API';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";;var Home=/*#__PURE__*/function(_PureComponent){_inherits(Home,_PureComponent);var _super=_createSuper(Home);function Home(props){var _this;_classCallCheck(this,Home);_this=_super.call(this,props);_this.componentDidMount=function(){_this.GetTexts();var sSender=window.prompt('Your name is:');if(sSender!=null){if(!sSender.trim()){_this.setState({sender:'Anonymous'});}else{_this.setState({sender:sSender});}}};_this.GetTexts=function(){API.getTexts().then(function(response){_this.setState({imageList:response.data.texts});}).catch(function(err){return alert(err);});};_this.SendText=function(){var textData=new FormData();textData.append('sender',_this.state.sender);textData.append('description',_this.state.description);API.sendText({sender:_this.state.sender,description:_this.state.description}).then(function(response){_this.GetTexts();}).catch(function(err){return alert('Error: '+err);});_this.GetTexts();};_this.deleteFile=function(id){API.deleteText(id).then(function(response){if(response.data.success){_this.setState({imageList:_this.state.imageList.filter(function(el){return el._id!==id;})});}}).catch(function(err){return alert(err);});};_this.state={sender:'',description:'',imageList:[]};return _this;}_createClass(Home,[{key:\"componentDidUpdate\",value:function componentDidUpdate(){// I was not using an li but may work to keep your div scrolled to the bottom as li's are getting pushed to the div\nvar objDiv=document.getElementById('scroll');if(objDiv!=null){objDiv.scrollTop=objDiv.scrollHeight;}}},{key:\"render\",value:function render(){var _this2=this;return/*#__PURE__*/_jsx(\"div\",{className:\"everything\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"chatandbox\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"scroll\",id:\"scroll\",children:this.state.imageList.map(function(text){return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"b\",{className:\"Sender\",children:text.sender}),/*#__PURE__*/_jsxs(\"small\",{className:\"Date\",children:[text.createdAt.slice(0,-14),\" \",text.createdAt.slice(11,-5)]}),/*#__PURE__*/_jsx(\"button\",{className:\"deletebutton\",onClick:function onClick(){return _this2.deleteFile(text._id);},children:\"Delete\"}),/*#__PURE__*/_jsx(\"p\",{className:\"Textt\",children:text.description})]});})}),/*#__PURE__*/_jsxs(\"div\",{className:\"input\",children:[/*#__PURE__*/_jsx(\"input\",{id:\"textbox\",className:\"inputBox\",type:\"text\",onChange:function onChange(event){return _this2.setState({description:event.target.value});},value:this.state.description}),/*#__PURE__*/_jsx(\"button\",{className:\"button\",id:\"sendButton\",onClick:this.SendText,children:\"Send\"})]})]})});}}]);return Home;}(PureComponent);export default Home;","map":{"version":3,"sources":["/Users/kelvinho/Documents/Coding/CAS website/website/client/src/Home.tsx"],"names":["React","PureComponent","API","Home","props","componentDidMount","GetTexts","sSender","window","prompt","trim","setState","sender","getTexts","then","response","imageList","data","texts","catch","err","alert","SendText","textData","FormData","append","state","description","sendText","deleteFile","id","deleteText","success","filter","el","_id","objDiv","document","getElementById","scrollTop","scrollHeight","map","text","createdAt","slice","event","target","value"],"mappings":"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","sourcesContent":["import React, { PureComponent } from 'react';\nimport './App.css';\nimport API from './utils/API';\n\n\ninterface texts {\n    imageList: any[];\n    description:string;\n    sender: string;\n};\n\nclass Home extends PureComponent<{}, texts> {\n    constructor(props: {}) {\n        super(props);\n\n        this.state = {\n            sender: '',\n            description: '',\n            imageList: [],\n        };\n    }\n\n    componentDidMount = () => {\n        this.GetTexts();\n        var sSender = window.prompt('Your name is:'); \n        if(sSender != null){\n            if(!sSender.trim()){\n                this.setState({sender: 'Anonymous'});\n            }\n            else {\n                this.setState({sender: sSender});\n            }\n        }\n    }\n    componentDidUpdate() {\n        // I was not using an li but may work to keep your div scrolled to the bottom as li's are getting pushed to the div\n        const objDiv = document.getElementById('scroll');\n        if (objDiv!=null){\n            objDiv.scrollTop = objDiv.scrollHeight;\n        }\n    }\n\n    GetTexts = () => {\n        API.getTexts()\n            .then(response => {\n                this.setState({ imageList: response.data.texts });\n            })\n            .catch(err => alert(err));\n    }\n\n    SendText = () => {\n        let textData = new FormData();\n        textData.append('sender', this.state.sender);\n        textData.append('description', this.state.description);\n\n        API.sendText({sender: this.state.sender, description: this.state.description})\n            .then((response) => {\n                this.GetTexts();\n            })\n            .catch(err => alert('Error: ' + err));\n            this.GetTexts();\n    }\n\n    deleteFile = (id: any) => {\n        API.deleteText(id)\n            .then((response) => {\n                if (response.data.success) {\n                    this.setState({ imageList: this.state.imageList.filter(el => el._id !== id)});\n                }\n            })\n            .catch(err => alert(err));\n    }\n\n    render(){\n        return (\n            <div className = \"everything\">\n                <div className = \"chatandbox\">\n                 <div className = \"scroll\" id = \"scroll\">\n                    {this.state.imageList.map((text) => (\n                        <div >\n                            <b className=\"Sender\">{text.sender}</b>\n                            <small className = \"Date\">{text.createdAt.slice(0, -14)} {text.createdAt.slice(11, -5)}</small>\n                            <button className = \"deletebutton\" onClick={() => this.deleteFile(text._id)}>Delete</button>\n                            <p className= \"Textt\">{text.description}</p>\n                            \n                        </div>\n                    ))}\n                </div>\n                <div className=\"input\">\n                    <input\n                        id = \"textbox\"\n                        className = \"inputBox\"\n                        type=\"text\"\n                        onChange={event => this.setState({ description: event.target.value })}\n                        value={this.state.description}\n                    />\n                    <button className=\"button\" id = \"sendButton\"onClick={this.SendText}>Send</button>\n                </div>\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default Home;"]},"metadata":{},"sourceType":"module"}